<!DOCTYPE HTML>
<!--
	Theory by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Analyst</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="subpage">

		<!-- Header -->
			<header id="header">
				<div class="inner">
					<a href="index.html" class="logo">Analyst Interface</a>
					<nav id="nav">
						<a href="index.html">Home</a>
						<a href="generic.html">Generic</a>
						<a href="elements.html">Elements</a>
					</nav>
					<a href="#navPanel" class="navPanelToggle"><span class="fa fa-bars"></span></a>
				</div>
			</header>

		<div class="inner">
					<br />
					<header class="align-center">
						<h2>World Flights Map</h2>
						<p>Displaying all flights between 2 dates</p>
					</header>
					<script src="http://d3js.org/d3.v3.min.js"></script>
					<script src="http://d3js.org/topojson.v1.min.js"></script>
					<script src="js/datamaps/dist/datamaps.usa.min.js"></script>
					<form style = "position : float; float: left; width : 200px">
						<label for="from">From : </label>
						<input id = "from" type="date" name="from" onchange="dateChange()"/>
						<br />
						<br />
						<label for="to">To : </label>
						<input id = "to" type="date" name="to" onchange="dateChange()"/>
					</form>
					<div id="container" style="position: float; float: right; width: 80%; height: 550px;"></div>
					<script>
						function dateChange() {
							var from_date = document.getElementById("from").value;
							var to_date = document.getElementById("to").value;
							if((from_date && to_date) != '') {
								var json_url = '/db_data?q=flights_arc&from=' + from_date + '&to=' + to_date;
								console.log(json_url);
								d3.json(json_url, function(json_data) {
									// Arcs coordinates can be specified explicitly with latitude/longtitude,
									// or just the geographic center of the state/country.
									map.arc(json_data);
								});
							}
						}

						var map = new Datamap({
						  element: document.getElementById("container"),
						  scope: 'usa',
						  fills: {
						    defaultFill: "#323f61",
						    win: '#0fa0fa'
						  },
						  data: {
						    'TX': { fillKey: 'win' },
						    'FL': { fillKey: 'win' },
						    'NC': { fillKey: 'win' },
						    'CA': { fillKey: 'win' },
						    'NY': { fillKey: 'win' },
						    'CO': { fillKey: 'win' }
						  }
						});
						/*
						[{
							_id : ''
							origin : '',
							destination : '',
							date : '',
						},
						{
							//...
						}]
						*/
				</script>
		</div>
		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
